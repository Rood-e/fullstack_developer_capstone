lint_js:
    name: Lint JavaScript Files (ESLint)
    runs-on: ubuntu-latest
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v3
      
    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        # Usa una versione LTS moderna, come la 20
        node-version: 20
        
    - name: Install Dependencies and ESLint
      run: |
        # Installa ESLint globalmente (o localmente se hai un package.json)
        npm install -g eslint
        # Se usi React, ti serviranno anche i plugin specifici
        npm install -g eslint-plugin-react
        
    - name: Create ESLint Configuration File
      run: |
        # Crea il file .eslintrc.json con la configurazione che risolve gli errori ES6/ES8
        echo '{
          "env": {
            "browser": true,
            "node": true,
            "es2020": true,
            "jest": true
          },
          "extends": [
            "eslint:recommended",
            "plugin:react/recommended"
          ],
          "parserOptions": {
            "ecmaVersion": 2020,
            "sourceType": "module",
            "ecmaFeatures": {
              "jsx": true
            }
          },
          "rules": {
            "semi": ["error", "always"],
            "no-unused-vars": "warn",
            "react/prop-types": "off",
            "quotes": ["error", "double"],
            "prefer-const": "error",
            "dot-notation": "off"
          },
          "settings": {
            "react": {
              "version": "detect"
            }
          }
        }' > .eslintrc.json
        
    - name: Run Linter
      run: |
        # Esegue ESLint su tutte le cartelle, escludendo node_modules
        eslint . --ext .js --ignore-path .gitignore --ignore-pattern "**/node_modules/**"
        echo "Linted all the js files successfully"
